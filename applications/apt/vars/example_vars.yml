# APT è½¯ä»¶åŒ…ç®¡ç†ç¤ºä¾‹å˜é‡é…ç½®ï¼ˆDebian ç³»åˆ—ç³»ç»Ÿï¼‰

# APT ç¼“å­˜é…ç½®
apt_cache_valid_time: 3600  # ç¼“å­˜æœ‰æ•ˆæ—¶é—´ï¼ˆç§’ï¼‰
apt_cache_retries: 3
apt_cache_retry_delay: 10

# ç³»ç»Ÿå‡çº§é…ç½®
upgrade_system: false

# åŸºç¡€ç³»ç»Ÿå·¥å…·åŒ…
base_system_packages:
  - vim
  - curl
  - wget
  - unzip
  - tar
  - htop
  - lsof
  - net-tools
  - software-properties-common
install_recommends: true

# ä»“åº“é…ç½®
add_repositories: false
additional_repositories:
  - repo: "ppa:ondrej/php"
    update_cache: true
  - repo: "ppa:deadsnakes/ppa"
    update_cache: false

# DEB ä»“åº“é…ç½®
add_deb_repositories: false
deb_repositories:
  - "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"
  - "deb https://packages.microsoft.com/ubuntu/20.04/prod focal main"

# Web æœåŠ¡å™¨é…ç½®
web_server_packages:
  - nginx
  - apache2
  - libapache2-mod-php
web_server_state: "present"  # present, latest, absent
web_server_release: ""  # æŒ‡å®šå‘è¡Œç‰ˆï¼Œå¦‚ focal, bionic
web_server_install_recommends: true
manage_web_service: true
web_server_service: "nginx"  # nginx, apache2

# æ•°æ®åº“æœåŠ¡é…ç½®
database_packages:
  - postgresql
  - postgresql-contrib
  - postgresql-client
  - mysql-server
  - mysql-client
install_database: false
manage_database_service: true
database_service: "postgresql"  # postgresql, mysql
allow_unauthenticated_db: false

# å¼€å‘ç¯å¢ƒé…ç½®
development_packages:
  - build-essential
  - cmake
  - git
  - make
  - gcc
  - g++
install_dev_packages: true
dev_install_recommends: false

# ç‰ˆæœ¬é”å®šåŒ…ï¼ˆç²¾ç¡®ç‰ˆæœ¬æ§åˆ¶ï¼‰
install_version_locked: false
version_locked_packages:
  nginx: "1.18.0-0ubuntu1"
  php7.4: "7.4.25-1ubuntu1.1"
  postgresql: "12+238"

# åº”ç”¨è¿è¡Œæ—¶ä¾èµ–
app_runtime_dependencies:
  - redis-server
  - git
  - nodejs
  - npm
  - supervisor
install_runtime_deps: true

# Python å¼€å‘ç¯å¢ƒ
python_packages:
  - python3
  - python3-pip
  - python3-dev
  - python3-venv
  - python3-setuptools
  - python3-wheel
install_python_packages: true

# Node.js å¼€å‘ç¯å¢ƒ
nodejs_packages:
  - nodejs
  - npm
  - yarn
install_nodejs_packages: false

# ç›‘æ§å·¥å…·
monitoring_tools:
  - htop
  - iotop
  - nethogs
  - sysstat
  - vmstat
  - iftop
install_monitoring: true

# å®‰å…¨å·¥å…·
security_tools:
  - fail2ban
  - ufw
  - rkhunter
  - chkrootkit
  - aide
  - lynis
install_security_tools: true

# éœ€è¦ç§»é™¤çš„åŒ…
packages_to_remove:
  - telnetd
  - rsh-server
  - rsh-redone-server
remove_unwanted_packages: false
purge_removed_packages: true
autoremove_unwanted: true

# ç³»ç»Ÿæ¸…ç†é…ç½®
cleanup_system: false

# è‡ªåŠ¨æ›´æ–°é…ç½®
configure_auto_updates: false

# å®‰è£…éªŒè¯é…ç½®
verify_installation: true
generate_report: true
apt_report_path: "/tmp/apt_installation_report.txt"

# å‘è¡Œç‰ˆç‰¹å®šé…ç½®
ubuntu_packages:
  "20.04":
    - php7.4
    - python3.8
  "22.04":
    - php8.1
    - python3.10
  "24.04":
    - php8.3
    - python3.12

debian_packages:
  "10":
    - php7.3
    - python3.7
  "11":
    - php7.4
    - python3.9
  "12":
    - php8.2
    - python3.11

# æœåŠ¡å™¨è§’è‰²é…ç½®
server_roles:
  web:
    - nginx
    - php8.1
    - redis-server
  database:
    - postgresql
    - postgresql-contrib
  development:
    - build-essential
    - python3-dev
    - nodejs
    - npm

# é‡è¦ï¼šè¿™äº›å˜é‡ä»…ç”¨äºæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒè¯·æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´
# âš ï¸ è­¦å‘Šï¼šè½¯ä»¶åŒ…ç‰ˆæœ¬éœ€è¦æ ¹æ®ç›®æ ‡ç³»ç»Ÿçš„ä»“åº“å¯ç”¨æ€§è¿›è¡Œè°ƒæ•´
# ğŸ”’ å®‰å…¨æç¤ºï¼šå®‰è£…è½¯ä»¶åŒ…å‰è¯·éªŒè¯ä»“åº“çš„å¯é æ€§å’Œ GPG å¯†é’¥
# ğŸ“ æ³¨æ„ï¼šä¸åŒ Ubuntu/Debian ç‰ˆæœ¬çš„åŒ…åç§°å’Œç‰ˆæœ¬å¯èƒ½å­˜åœ¨å·®å¼‚
# ğŸš€ æ€§èƒ½æç¤ºï¼šåœ¨å¤§é‡å®‰è£…æ“ä½œå‰æ›´æ–°ç¼“å­˜å¯ä»¥æé«˜å®‰è£…é€Ÿåº¦
# ğŸ”„ æ›´æ–°æç¤ºï¼šç³»ç»Ÿå‡çº§æ“ä½œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå»ºè®®åœ¨ç»´æŠ¤çª—å£æœŸæ‰§è¡Œ

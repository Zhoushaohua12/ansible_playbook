# âš ï¸ æœ¬æ–‡ä»¶ä»…ä¸ºç¤ºä¾‹ï¼Œå ä½ç¬¦å¿…é¡»ä½¿ç”¨ Ansible Vault æˆ–ç¯å¢ƒå˜é‡æ›¿æ¢

# Docker å®¹å™¨ç®¡ç†ç¤ºä¾‹å˜é‡é…ç½®

# Docker æœåŠ¡ç®¡ç†
docker_manage_service: true  # æ˜¯å¦ç®¡ç† Docker æœåŠ¡çŠ¶æ€

# ç½‘ç»œé…ç½®
docker_network_name: "app_network"  # Docker ç½‘ç»œåç§°
docker_create_network: true  # æ˜¯å¦åˆ›å»ºç½‘ç»œ

# Nginx å®¹å™¨é…ç½®
nginx_container_name: "web_server"
nginx_image: "nginx"
nginx_version: "1.21-alpine"
nginx_host_port: 8080  # ä¸»æœºç«¯å£
nginx_ssl_port: 8443   # ä¸»æœº SSL ç«¯å£
nginx_restart_policy: "unless-stopped"
nginx_memory_limit: "256m"
nginx_server_name: "example.com"

# Nginx è·¯å¾„é…ç½®
nginx_config_path: "/opt/nginx/conf.d"
nginx_content_path: "/opt/nginx/html"
nginx_log_path: "/opt/nginx/logs"

# Redis å®¹å™¨é…ç½®
redis_container_name: "redis_cache"
redis_image: "redis"
redis_version: "6.2-alpine"
redis_host_port: 6379
redis_restart_policy: "unless-stopped"
redis_memory_limit: "128m"
redis_user: "redis"
redis_password: "{{ vault_redis_password }}"  # ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ Ansible Vault

# Redis è·¯å¾„é…ç½®
redis_data_path: "/opt/redis/data"

# åº”ç”¨å®¹å™¨é…ç½®ï¼ˆæŒç»­éƒ¨ç½²ç¤ºä¾‹ï¼‰
app_container_name: "web_application"
app_registry_url: "registry.example.com"
app_image_name: "myapp"
app_version: "v1.2.3"  # åº”ç”¨ç‰ˆæœ¬æ ‡ç­¾
app_host_port: 3000    # ä¸»æœºç«¯å£
app_container_port: 3000  # å®¹å™¨å†…éƒ¨ç«¯å£
app_restart_policy: "unless-stopped"
app_memory_limit: "512m"
app_cpu_limit: "0.5"

# åº”ç”¨ç¯å¢ƒé…ç½®
app_environment: "production"
app_database_url: "{{ vault_app_database_url }}"
app_secret_key: "{{ vault_app_secret_key }}"  # ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ Ansible Vault
app_debug_mode: "false"

# åº”ç”¨è·¯å¾„é…ç½®
app_log_path: "/opt/app/logs"
app_upload_path: "/opt/app/uploads"

# éƒ¨ç½²å¼€å…³
deploy_nginx: true      # æ˜¯å¦éƒ¨ç½² Nginx
deploy_redis: true      # æ˜¯å¦éƒ¨ç½² Redis
deploy_app: true        # æ˜¯å¦éƒ¨ç½²åº”ç”¨

# é‡è¦ï¼šè¿™äº›å˜é‡ä»…ç”¨äºæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ Ansible Vault æˆ–å¤–éƒ¨é…ç½®ç®¡ç†
# âš ï¸ è­¦å‘Šï¼šç¤ºä¾‹ä¸­çš„å¯†ç å’Œå¯†é’¥éœ€è¦æ›¿æ¢ä¸ºå®é™…çš„å®‰å…¨å€¼
# ğŸ”’ å®‰å…¨æç¤ºï¼šç«¯å£æ˜ å°„éœ€è¦æ ¹æ®å®é™…ç½‘ç»œç¯å¢ƒè°ƒæ•´ï¼Œé¿å…ç«¯å£å†²çª
# ğŸ“ æ³¨æ„ï¼šå®¹å™¨é•œåƒç‰ˆæœ¬å»ºè®®ä½¿ç”¨å…·ä½“æ ‡ç­¾è€Œé latest

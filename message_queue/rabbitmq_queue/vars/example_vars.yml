---
# ⚠️ 本文件仅为示例，占位符必须使用 Ansible Vault 或环境变量替换
# RabbitMQ 队列管理配置变量示例文件

# =============================================================================
# RabbitMQ 连接配置（需要管理员凭证）
# =============================================================================

rabbitmq_admin_user: "{{ vault_rabbitmq_admin_user }}"
rabbitmq_admin_password: "{{ vault_rabbitmq_admin_password }}"

# =============================================================================
# 队列配置
# =============================================================================

rabbitmq_queues:
  # 工作队列
  - name: "app.tasks"
    vhost: "/app"
    durable: true
    auto_delete: false
    arguments:
      x-max-length: 10000
  
  # 延迟队列
  - name: "app.delayed"
    vhost: "/app"
    durable: true
    arguments:
      x-message-ttl: 60000
      x-dead-letter-exchange: "app.dlx"
      x-dead-letter-routing-key: "app.tasks"
  
  # 死信队列
  - name: "app.dead_letter"
    vhost: "/app"
    durable: true

# =============================================================================
# 交换机配置
# =============================================================================

rabbitmq_exchanges:
  # Topic 交换机
  - name: "app.logs"
    type: topic
    vhost: "/app"
    durable: true
  
  # 死信交换机
  - name: "app.dlx"
    type: direct
    vhost: "/app"
    durable: true

# =============================================================================
# 绑定配置
# =============================================================================

rabbitmq_bindings:
  # 绑定日志队列
  - exchange: "app.logs"
    queue: "app.error_logs"
    routing_key: "error.*"
    vhost: "/app"
  
  # 绑定死信队列
  - exchange: "app.dlx"
    queue: "app.dead_letter"
    routing_key: "app.tasks"
    vhost: "/app"

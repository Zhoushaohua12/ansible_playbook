# ⚠️ 本文件仅为示例，占位符必须使用 Ansible Vault 或环境变量替换

# URI 模块 HTTP 请求示例变量

# ========== 基础请求配置 ==========
# 目标 HTTP/HTTPS URL（示例）
uri_target_url: "http://example.com"

# 是否验证 SSL 证书（生产环境必须设为 true）
uri_validate_certs: true

# 请求超时时间（秒）
uri_request_timeout: 10

# ========== API 认证配置 ==========
# API 端点（示例）
uri_api_endpoint: "https://api.example.com/v1/status"

# API Token（示例值，生产环境使用 Ansible Vault）
# ⚠️ 警告：禁止在 playbook 中明文存储 token，应使用 ansible-vault 加密
uri_api_token: "{{ vault_api_token | default('PLACEHOLDER_TOKEN') }}"

# ========== POST 请求配置 ==========
# POST 端点（示例）
uri_post_endpoint: "https://api.example.com/v1/events"

# POST 数据（示例 JSON）
uri_post_data:
  action: "deploy"
  version: "1.0.0"
  timestamp: "{{ ansible_date_time.iso8601 }}"

# 启用 POST 测试
uri_enable_post_test: false

# ========== 健康检查配置 ==========
# 健康检查 URL
uri_health_check_url: "https://api.example.com/healthz"

# 期望的 HTTP 状态码（200-正常，503-服务不可用等）
uri_expected_status_code: 200

# ========== 其他测试端点 ==========
# 不稳定的端点（用于测试错误处理）
uri_unreliable_endpoint: "https://api.example.com/unreliable"

# 启用错误处理测试
uri_enable_error_test: false

# JSON 响应端点
uri_json_endpoint: "https://api.example.com/config.json"

# 启用 JSON 解析测试
uri_enable_json_parse: false

# 带重试的端点
uri_retry_endpoint: "https://api.example.com/retry"

# 启用重试测试
uri_enable_retry_test: false

# HTTPS 端点（用于 SSL 证书验证测试）
uri_https_endpoint: "https://api.example.com/secure"

# 启用 SSL 测试
uri_enable_ssl_test: false

# 启用基础测试
uri_enable_basic_test: true

# ========== 重要提示 ==========
# ⚠️ 警告：这些变量仅用于演示，生产环境请根据实际需求调整
# 1. API Token 安全处理：
#    - 禁止在 playbook 中明文存储敏感信息（Token、密钥、密码）
#    - 使用 Ansible Vault 加密：ansible-vault create vars/secrets.yml
#    - 在 playbook 中使用 vars_files 引入加密文件
#    - 执行时使用 --ask-vault-pass 或 --vault-password-file
# 2. SSL/TLS 验证：
#    - 生产环境必须设置 validate_certs: true
#    - 仅在测试环境或自签名证书下临时使用 false
#    - 定期更新系统 CA 证书
# 3. HTTP 状态码处理：
#    - 200-299：成功
#    - 300-399：重定向
#    - 400-499：客户端错误（如 401 未认证、403 无权限、404 不存在）
#    - 500-599：服务器错误（如 500 内部错误、503 服务不可用）
# 4. 超时与重试：
#    - 根据 API 响应时间调整 timeout 值
#    - 对网络不稳定的场景使用 retries 和 delay
#    - 监控请求耗时，识别性能瓶颈
# 5. 请求头配置：
#    - Authorization：用于传递 Token（格式：Bearer {token}）
#    - Content-Type：指定请求数据格式（如 application/json）
#    - Accept：指定期望的响应格式
# 6. 敏感信息保护：
#    - 使用 no_log: true 隐藏包含认证信息的任务输出
#    - 避免在日志或输出中暴露 Token、密钥等敏感数据
#    - 定期审查日志，检查是否有敏感信息泄露
# 7. 常见 HTTP 错误诊断：
#    - 401 Unauthorized：检查 API Token 是否正确、是否过期
#    - 403 Forbidden：检查账户权限、IP 白名单配置
#    - 404 Not Found：检查 URL 是否正确、API 版本是否匹配
#    - 500 Internal Server Error：检查服务器日志、API 是否正常运行
#    - 503 Service Unavailable：检查服务是否在维护、资源是否耗尽

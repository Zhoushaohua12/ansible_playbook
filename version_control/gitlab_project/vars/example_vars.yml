# GitLab é¡¹ç›®ç®¡ç†ç¤ºä¾‹å˜é‡é…ç½®

# GitLab API é…ç½®
gitlab_api_url: "https://gitlab.example.com/api/v4"  # GitLab API åœ°å€
gitlab_token: "glpat-xxxxxxxxxxxxxxxxxxxx"  # GitLab Personal Access Tokenï¼ˆç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ Ansible Vaultï¼‰

# é¡¹ç›®ç»„é…ç½®
dev_group: "development"  # å¼€å‘ç»„
test_group: "testing"  # æµ‹è¯•ç»„
prod_group: "production"  # ç”Ÿäº§ç»„
templates_group: "templates"  # æ¨¡æ¿ç»„
docs_group: "documentation"  # æ–‡æ¡£ç»„
import_group: "imported"  # å¯¼å…¥ç»„

# å¼€å‘å›¢é˜Ÿé¡¹ç›®
create_dev_project: true  # æ˜¯å¦åˆ›å»ºå¼€å‘é¡¹ç›®
dev_project_name: "dev-webapp"  # å¼€å‘é¡¹ç›®åç§°
dev_project_description: "å¼€å‘å›¢é˜Ÿçš„ Web åº”ç”¨é¡¹ç›®"  # å¼€å‘é¡¹ç›®æè¿°
dev_visibility: "internal"  # å¼€å‘é¡¹ç›®å¯è§æ€§

# æµ‹è¯•å›¢é˜Ÿé¡¹ç›®
create_test_project: true  # æ˜¯å¦åˆ›å»ºæµ‹è¯•é¡¹ç›®
test_project_name: "test-webapp"  # æµ‹è¯•é¡¹ç›®åç§°
test_project_description: "æµ‹è¯•å›¢é˜Ÿçš„ Web åº”ç”¨é¡¹ç›®"  # æµ‹è¯•é¡¹ç›®æè¿°
test_visibility: "internal"  # æµ‹è¯•é¡¹ç›®å¯è§æ€§

# ç”Ÿäº§å›¢é˜Ÿé¡¹ç›®
create_prod_project: true  # æ˜¯å¦åˆ›å»ºç”Ÿäº§é¡¹ç›®
prod_project_name: "prod-webapp"  # ç”Ÿäº§é¡¹ç›®åç§°
prod_project_description: "ç”Ÿäº§å›¢é˜Ÿçš„ Web åº”ç”¨é¡¹ç›®"  # ç”Ÿäº§é¡¹ç›®æè¿°
prod_visibility: "private"  # ç”Ÿäº§é¡¹ç›®å¯è§æ€§

# CI/CD æ¨¡æ¿é¡¹ç›®
create_cicd_template: true  # æ˜¯å¦åˆ›å»º CI/CD æ¨¡æ¿
cicd_template_name: "cicd-pipeline-template"  # CI/CD æ¨¡æ¿åç§°
cicd_template_description: "CI/CD æµæ°´çº¿æ¨¡æ¿é¡¹ç›®"  # CI/CD æ¨¡æ¿æè¿°

# æ–‡æ¡£é¡¹ç›®
create_docs_project: true  # æ˜¯å¦åˆ›å»ºæ–‡æ¡£é¡¹ç›®
docs_project_name: "project-documentation"  # æ–‡æ¡£é¡¹ç›®åç§°
docs_project_description: "é¡¹ç›®æ–‡æ¡£å’ŒçŸ¥è¯†åº“"  # æ–‡æ¡£é¡¹ç›®æè¿°

# å¾®æœåŠ¡é¡¹ç›®é…ç½®
create_microservice_projects: true  # æ˜¯å¦åˆ›å»ºå¾®æœåŠ¡é¡¹ç›®
microservice_projects:
  - name: "user-service"
    group: "{{ dev_group }}"
    description: "ç”¨æˆ·ç®¡ç†å¾®æœåŠ¡"
    visibility: "private"
    issues_enabled: true
    wiki_enabled: true
    merge_requests_enabled: true
    builds_enabled: true
    request_access_enabled: false
    only_allow_merge_if_pipeline_succeeds: true
  - name: "order-service"
    group: "{{ dev_group }}"
    description: "è®¢å•ç®¡ç†å¾®æœåŠ¡"
    visibility: "private"
    issues_enabled: true
    wiki_enabled: true
    merge_requests_enabled: true
    builds_enabled: true
    request_access_enabled: false
    only_allow_merge_if_pipeline_succeeds: true
  - name: "payment-service"
    group: "{{ dev_group }}"
    description: "æ”¯ä»˜ç®¡ç†å¾®æœåŠ¡"
    visibility: "private"
    issues_enabled: true
    wiki_enabled: true
    merge_requests_enabled: true
    builds_enabled: true
    request_access_enabled: false
    only_allow_merge_if_pipeline_succeeds: true
  - name: "notification-service"
    group: "{{ dev_group }}"
    description: "é€šçŸ¥ç®¡ç†å¾®æœåŠ¡"
    visibility: "private"
    issues_enabled: true
    wiki_enabled: true
    merge_requests_enabled: true
    builds_enabled: true
    request_access_enabled: false
    only_allow_merge_if_pipeline_succeeds: true

# å¤–éƒ¨é¡¹ç›®å¯¼å…¥
import_external_project: true  # æ˜¯å¦å¯¼å…¥å¤–éƒ¨é¡¹ç›®
import_project_name: "imported-legacy-app"  # å¯¼å…¥é¡¹ç›®åç§°
import_project_description: "ä»å¤–éƒ¨ä»“åº“å¯¼å…¥çš„é—ç•™åº”ç”¨"  # å¯¼å…¥é¡¹ç›®æè¿°
import_repo_url: "https://github.com/company/legacy-app.git"  # å¤–éƒ¨ä»“åº“ URL

# æ¨¡æ¿é¡¹ç›®
create_template_projects: true  # æ˜¯å¦åˆ›å»ºæ¨¡æ¿é¡¹ç›®
template_projects:
  - name: "spring-boot-template"
    description: "Spring Boot åº”ç”¨æ¨¡æ¿"
  - name: "react-frontend-template"
    description: "React å‰ç«¯åº”ç”¨æ¨¡æ¿"
  - name: "python-api-template"
    description: "Python API æœåŠ¡æ¨¡æ¿"
  - name: "docker-service-template"
    description: "Docker å®¹å™¨æœåŠ¡æ¨¡æ¿"

# é¡¹ç›®æ›´æ–°é…ç½®
update_project_config: true  # æ˜¯å¦æ›´æ–°é¡¹ç›®é…ç½®
update_project_name: "dev-webapp"  # è¦æ›´æ–°çš„é¡¹ç›®åç§°
update_group: "{{ dev_group }}"  # è¦æ›´æ–°çš„é¡¹ç›®ç»„
updated_description: "æ›´æ–°åçš„å¼€å‘å›¢é˜Ÿ Web åº”ç”¨é¡¹ç›®æè¿°"  # æ›´æ–°åçš„æè¿°
updated_visibility: "private"  # æ›´æ–°åçš„å¯è§æ€§

# ä¿¡æ¯è·å–é…ç½®
get_project_info: true  # æ˜¯å¦è·å–é¡¹ç›®ä¿¡æ¯
projects_to_check:
  - name: "{{ dev_project_name }}"
    group: "{{ dev_group }}"
  - name: "{{ test_project_name }}"
    group: "{{ test_group }}"
  - name: "{{ prod_project_name }}"
    group: "{{ prod_group }}"
  - name: "{{ docs_project_name }}"
    group: "{{ docs_group }}"

# æ–‡ä»¶è¾“å‡ºé…ç½®
create_config_files: true  # æ˜¯å¦åˆ›å»ºé…ç½®æ–‡ä»¶
config_output_path: "/tmp/gitlab-project-configs"  # é…ç½®æ–‡ä»¶è¾“å‡ºè·¯å¾„
generate_report: true  # æ˜¯å¦ç”ŸæˆæŠ¥å‘Š
report_output_path: "/tmp/gitlab-reports"  # æŠ¥å‘Šè¾“å‡ºè·¯å¾„

# æ˜¾ç¤ºé…ç½®
show_results: true  # æ˜¯å¦æ˜¾ç¤ºæ“ä½œç»“æœæ‘˜è¦

# æ¸…ç†é…ç½®
test_projects_to_cleanup:  # æµ‹è¯•å®Œæˆåè¦æ¸…ç†çš„é¡¹ç›®
  - "test-temp-project-1"
  - "test-temp-project-2"

# é¡¹ç›®åŠŸèƒ½é…ç½®
project_features:
  issues:
    enabled: true
    description: "å¯ç”¨é—®é¢˜è·Ÿè¸ª"
  wiki:
    enabled: true
    description: "å¯ç”¨é¡¹ç›®æ–‡æ¡£"
  merge_requests:
    enabled: true
    description: "å¯ç”¨åˆå¹¶è¯·æ±‚"
  builds:
    enabled: true
    description: "å¯ç”¨ CI/CD"
  snippets:
    enabled: false
    description: "ç¦ç”¨ä»£ç ç‰‡æ®µ"

# æƒé™é…ç½®
permissions:
  request_access:
    enabled: true
    description: "å…è®¸ç”¨æˆ·è¯·æ±‚è®¿é—®æƒé™"
  merge_restrictions:
    pipeline_succeeds: true
    description: "ä»…å…è®¸æµæ°´çº¿æˆåŠŸæ—¶åˆå¹¶"
    discussions_resolved: true
    description: "ä»…å…è®¸æ‰€æœ‰è®¨è®ºè§£å†³ååˆå¹¶"

# é¡¹ç›®æ¨¡æ¿é…ç½®
templates:
  webapp:
    name: "webapp-template"
    description: "Web åº”ç”¨æ ‡å‡†æ¨¡æ¿"
    visibility: "internal"
  api:
    name: "api-service-template"
    description: "API æœåŠ¡æ ‡å‡†æ¨¡æ¿"
    visibility: "private"
  library:
    name: "library-template"
    description: "å…±äº«åº“æ ‡å‡†æ¨¡æ¿"
    visibility: "public"

# é‡è¦ï¼šè¿™äº›å˜é‡ä»…ç”¨äºæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ Ansible Vault æˆ–å¤–éƒ¨é…ç½®ç®¡ç†
# âš ï¸ è­¦å‘Šï¼šGitLab Token éœ€è¦å®‰å…¨å­˜å‚¨ï¼Œå»ºè®®ä½¿ç”¨ Ansible Vault åŠ å¯†
# ğŸ”’ å®‰å…¨æç¤ºï¼šé™åˆ¶ Token æƒé™èŒƒå›´ï¼Œä»…æˆäºˆå¿…è¦çš„ API æƒé™
# ğŸ“ æ³¨æ„ï¼šGitLab API åœ°å€å’Œç»„åç§°éœ€è¦æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
# ğŸš€ æ€§èƒ½ä¼˜åŒ–ï¼šåˆç†æ§åˆ¶æ‰¹é‡åˆ›å»ºçš„å¹¶å‘æ•°
# ğŸ” ç›‘æ§å»ºè®®ï¼šç›‘æ§é¡¹ç›®åˆ›å»ºçš„æˆåŠŸç‡å’Œè€—æ—¶
# ğŸ›¡ï¸ å®‰å…¨åŠ å›ºï¼šå®šæœŸè½®æ¢ GitLab è®¿é—®ä»¤ç‰Œ
# ğŸ“Š å®¹é‡è§„åˆ’ï¼šç›‘æ§ GitLab æœåŠ¡å™¨çš„èµ„æºä½¿ç”¨æƒ…å†µ
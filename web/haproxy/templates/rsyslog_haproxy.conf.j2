# rsyslog 配置文件片段 - HAProxy 日志转发
# 由 Ansible 自动生成，请勿直接编辑
# Generated by Ansible - Do not edit manually

# ===== HAProxy 日志处理 =====
# 配置 rsyslog 将 HAProxy 日志写入专用文件

# 定义 HAProxy 日志文件模板
$template HAProxyFormat,"%TIMESTAMP% %HOSTNAME% %syslogtag%%msg%\n"

# 捕获来自 local0 设施的 HAProxy 日志
:programname, isequal, "haproxy" /var/log/haproxy/haproxy.log;HAProxyFormat

# 或者使用设施过滤
# local0.* /var/log/haproxy/haproxy.log;HAProxyFormat

# 防止 HAProxy 日志写入到系统 syslog
& stop

# ===== 日志轮转配置 =====
# 需要在 /etc/logrotate.d/haproxy 中配置日志轮转规则
# 示例：
# /var/log/haproxy/haproxy.log {
#     daily
#     rotate 14
#     compress
#     delaycompress
#     notifempty
#     missingok
#     postrotate
#         /usr/bin/killall -HUP rsyslog > /dev/null 2>&1 || true
#     endscript
# }
